<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>
    <link rel="stylesheet" href="payment.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <div class="payment-info">
        <h3 class="payment-heading">Payment Information</h3>
        <form class="form-box">
            <div class="col-25">
                <div class="container">
                    <h4 id="carName">Car Name</h4>
                    <p>Total: <span id="total" class="price">$0</span></p>
                    <p>Collection Date: <span id="pickup" class="price">$</span></p>
                    <p>Location: <span id="pickupLocation" class="price">$</span></p>
                    <p>Rent Duration: <span id="rentalDuration" class="price"></span></p>
                </div>
            </div>

            <div>
                <label for="full-name">Full Name</label>
                <input id="full-name" name="full-name" placeholder="" required type="text">
            </div>

            <div>
                <label for="credit-card-number">Card Number</label>
                <input id="credit-card-number" name="credit-card-number"
                    placeholder="1111-2222-3333-4444" required type="text">
                <span class="card-logos">
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-mastercard"></i>
                </span>
            </div>

            <div>
                <p class="expires">Expired on:</p>
                <div class="card-expiration">
                    <label for="expiration-month">Month</label>
                    <select id="expiration-month" name="expiration-month" required>
                        <option value="January">January</option>
                        <option value="February">February</option>
                        <option value="March">March</option>
                        <option value="April">April</option>
                        <option value="May">May</option>
                        <option value="June">June</option>
                        <option value="July">July</option>
                        <option value="August">August</option>
                        <option value="September">September</option>
                        <option value="October">October</option>
                        <option value="November">November</option>
                        <option value="Decemeber">Decemeber</option>
                    </select>

                    <label class="expiration-year">Year</label>
                    <select id="expiration-year" name="expiration-year" required>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                    </select>
                </div>
            </div>

            <div>
                <label for="cvv">CVV</label>
                <input id="cvv" name="cvv" placeholder="" type="text" required>
                <a class="cvv-info" href="#">What is CVV?</a>
            </div>

            <button type="button" class="btn" id="confirmBookingBtn">
                <i class="fas fa-lock"></i> Confirm Booking 
            </button>
        </form>

        <p class="footer-text">
            <i class="fas fa-lock"></i> Your credit card information is encrypted
        </p>

        <div class="return_link">Cancel Booking? <a href="index2.html">homepage</a></div>
    </div>

<script>
    // Get the car name and total from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const carName = urlParams.get("carName");
    const total = urlParams.get("total");
    const pickup = urlParams.get("pickup");
    const pickupLocation = urlParams.get("location"); 
    const days = parseInt(urlParams.get("days"));
    const weeks = parseInt(urlParams.get("weeks"));
    const months = parseInt(urlParams.get("months"));

    const rentalDuration = `${days} days, ${weeks} weeks, ${months} months`;

    document.getElementById("carName").textContent = carName;
    document.getElementById("total").textContent = total;
    document.getElementById("pickup").textContent = pickup;
    document.getElementById("pickupLocation").textContent = pickupLocation;
    document.getElementById("rentalDuration").textContent = rentalDuration;

    document.addEventListener('DOMContentLoaded', function() {
    const confirmBookingBtn = document.getElementById('confirmBookingBtn');

    confirmBookingBtn.addEventListener('click', function() {
        const isConfirmed = confirm('Are you sure you want to confirm the booking?');
        
        if (isConfirmed) {
            // Get car details from the URL parameters
            const carName = urlParams.get("carName");
            const total = urlParams.get("total");
            const pickup = urlParams.get("pickup");
            const location = urlParams.get("location");
            const days = parseInt(urlParams.get("days"));
            const weeks = parseInt(urlParams.get("weeks"));
            const months = parseInt(urlParams.get("months"));

            // Redirect to the booking details page with car details in the URL
            window.location.href = `booking.html?carName=${carName}&total=${total}&pickup=${pickup}&location=${location}&days=${days}&weeks=${weeks}&months=${months}`;
        }
    });
});

</script>
</body>
</html>
